parameters:
  ucms_dashboard.page_builder.templates:
    th-list: module:ucms_dashboard:views/Page/page.html.twig
    th: module:ucms_dashboard:views/Page/page-grid.html.twig

services:

  ucms_dashboard.page_builder:
    class: MakinaCorpus\Ucms\Dashboard\Page\PageBuilder
    arguments: ['@twig', '%ucms_dashboard.page_builder.templates%']

  ucms_dashboard.context:
    class: MakinaCorpus\Ucms\Dashboard\Context\ContextPane
    arguments: ['@event_dispatcher', '@request_stack']

  ucms_dashboard.admin_widget_factory:
    class: MakinaCorpus\Ucms\Dashboard\AdminWidgetFactory
    arguments: ['@form_builder', '@ucms_dashboard.page_builder', '@ucms_dashboard.action_provider_registry', '@twig', '@event_dispatcher']

  ucms_dashboard.processor_registry:
    class: MakinaCorpus\Ucms\Dashboard\Action\ProcessorActionProvider
    tags: [{name: ucms_dashboard.action_provider}]

  ucms_dashboard.action_provider_registry:
    public: false
    class: MakinaCorpus\Ucms\Dashboard\Action\ActionRegistry

  ucms_dashboard.portlet_registry:
    class: MakinaCorpus\Ucms\Dashboard\Portlet\PortletRegistry

  ucms_dashboard.transaction_handler:
    class: MakinaCorpus\Ucms\Dashboard\TransactionHandler
    arguments: ['@database']

  ucms_dashboard.twig.action_extension:
    public: false
    class: MakinaCorpus\Ucms\Dashboard\Twig\Extension\ActionExtension
    arguments: ['@ucms_dashboard.action_provider_registry']
    tags: [{name: twig.extension}]
